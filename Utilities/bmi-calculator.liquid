{% comment %} CSS {% endcomment %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');
      #myChart {
        height: unset;
        width: 100%;
      
      }
        div#myChart-license-text {
          display: none;
        }
       div#myChart-wrapper {
          width: 398px !important;
      }
      .zc-ref {
        display: none;
      }
      path#myChart-menu-trigger-path {
      display: none !important;
  }
    
     .BMI-calculator form {
      background-color: #fff;
      height: auto;
      width: 100%;
      border-radius: 20px;
      display: block;
      border: solid 4px #df2b37;
      font-family: Open Sans, sans-serif;
      font-size: 12px !important;
      letter-spacing: 0px;
      color: #474747;
      text-transform: uppercase;
      opacity: 1;
      font-weight: 600;
  }
      p.changeUnit {
      font-size: small !important;
      color: #df2b37;
      cursor: pointer;
      text-decoration: underline;
      text-transform: lowercase !important;
  
     }
      
      .row-one {
        padding: 10px 20px;
      }
      
      .row-two {
        padding: 10px 20px;
        display:flex;
      }
      .contact-details{
        padding:20%
      }
        .email-input {
          width: 100%;
          height: 50px;
          border-radius: 0;
          border: 2px solid #df2b37;
          outline: none;
          padding: 5px 10px;
          cursor: pointer;
      }
        .phone-input {
          width: 100%;
          height: 50px;
          border-radius: 0;
          border: 2px solid #df2b37;
          outline: none;
          padding: 5px 10px;
          cursor: pointer;
      }
    :root {
   --color-black: #232323;
   --color-pink: #ff6393;
   --color-dark-pink: #df4775;
   --color-purple: #342a47;
   --color-blue: deepskyblue;
   --color-gray: #525252;
   --color-green: #bbe187;
   
   --transition-fast: 0.1s;
  }
  .InputGroup {
   display: flex;
   height: 40px;
   width: 400px;
  }
  
  input[type="radio"] {
    visibility: hidden; /* 1 */
    height: 0; /* 2 */
    width: 0; /* 2 */
  }
  
  .InputGroup label {
    display: flex;
    flex: auto;
    vertical-align: middle;
    align-items: center;
    justify-content: center;
    text-align: center;
    cursor: pointer;
    background-color: var(--color-gray);
    color: white;
    padding: 5px 10px;
    border-radius: 6px;
    transition: color --transition-fast ease-out, 
                background-color --transition-fast ease-in;
    user-select: none;
   margin-right: 8px;
  }
  
  label:last-of-type {
   margin-right: 0;
  }
  
  input[type="radio"]:checked + label {
    background-color: #df2b37;
    color: white;
  }
  
  input[type="radio"]:hover:not(:checked) + label {
   background-color:#df2b37;
   color: var(--color-black);
  }
  
  
      .text-input {
        width: 80px;
         height: 50px;
        border-radius: 0;
         border: 2px solid #df2b37;
        outline: none;
        padding: 5px 10px;
        cursor: pointer;
      }
      
      .text-input:last-child {
        margin-bottom: 35px;
      }
  
      p.small {
      display: inline-block;
     }
      #submit {
       border: none;
          border-radius: 10px;
          height: 40px;
          width: 90%;
          color: #fff;
          margin: 10px auto;
          display: block;
          outline: none;
          cursor: pointer;
          background: #df2b37;
          font-size: 1.5rem;
          text-transform: uppercase;
          font-weight:600
      }
      }
      
      #submit:hover{
        background-color: #0a8ef2;
      }
      
       #submit.disabled {
          background-color: #f04f3678;
          cursor: not-allowed;
      }
      p.text,.text-contact {
       font-size: 12px;
      letter-spacing: 0px;
      color: #474747;
      text-transform: uppercase;
      opacity: 1;
      font-weight: 600;
      }
      .text-contact{
         margin: 5px 20px 5px 8px;
      }
      .form-not-filled{
         width: 20%;
      }
      
      
      .container {
        display: inline-block;
        position: relative;
        padding-left: 30px;
        cursor: pointer;
        user-select: none;
      }
      
      .container input {
        position: absolute;
        opacity: 0;
      }
      
      .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 25px;
        width: 25px;
        background-color: #f04f3699;
        border-radius: 50%;
      }
      
    
      
      h1 {
        font-size: 30px;
        font-weight: 300;
        text-align: center;
        color: #f04f36;
        padding-top: 15px;
        display: block;
      }
      
      
      h3 {
          font-size: 3rem;
          font-weight: 500;
          text-align: center;
          padding: 15px;
      }
      
      h3 b {
        font-size: 4rem;
        font-weight: 300;
        color: #df2b37;
      }
        .BMI-box {
          display: flex;
          justify-content: space-around;
      }
         @media screen and (max-width: 719px) {
            .BMI-box {
                display: flow-root;
                justify-content: space-around;
                padding: 10px;
            }
           h3 {
          font-size: 1.5rem;
          font-weight: 500;
          text-align: center;
          padding: 15px;
        }
           .text {
              margin: 5px 0px 5px 8px;
          }  
            table.BMI-Table {
              width: 90%;
          }
           p.small {
            display: inline-block;
            font-size: smaller;
        }
         }
         @media screen and (min-width: 720px) {
            div#BMI-result-box,.BMI-calculator{
              width:50%;
              padding:10px
            }
             table.BMI-Table {
              width: 50%;
          }
       }
        span.form-not-filled {
          display: flex;
          width: 100%;
          justify-content: center;
          color: red;
          margin: 10px 0px;
      }
        table.BMI-Table {
          background-color: #ffffff;
          border-collapse: collapse;
          border-width: 2px;
          border-color: #df2b37;
          border-style: solid;
          color: #000000;
          margin: 0 auto;
      }
      
      table.BMI-Table td, table.BMI-Table th {
        border-width: 2px;
        border-color: #df2b37;
        border-style: solid;
        padding: 3px;
      }
      
      table.BMI-Table thead {
        background-color: #df2b37;
      }
        .BMI-result{
          font-size:1.5rem;
        }
      button#dummy-chat-button {
            display: none !important;
        }
    iframe#preview-bar-iframe {
      display: none;
  }
    .age {
      margin-left: 35px;
  }
      </style>
      
      {% comment %} HTML {% endcomment %}
          <!-- Load plotly.js into the DOM -->
          <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Quicksand:400,700" rel="stylesheet">
  
      
      
          <h3><b>B</b>ody <b>M</b>ass <b>I</b>ndex Calculator</h3>
          
      <div class="BMI-box page-width">
        <div class="BMI-calculator">
               
                  <form class="form" id="form" onsubmit="return countBmi(e)">
                    <div class="row-one">
                      <p class="text-contact">Email</p>
                   <input type="email" onchange="validateForm()" class="email-input" id="email" autocomplete="on" required placeholder="example@gmail.com"/>
                      <p class="text-contact">Mobile Number</p>
                    <input type="tel" class="phone-input" onchange="validateForm()" id="phone-number" autocomplete="on" required placeholder="+91 XXXXXXXXXX"/>
                    </div>
  
                    <div class="row-two">
                      <div class="InputGroup"> 
                             <input type="radio" name="sex" id="size_1" value="male" checked />
                             <label for="size_1">Male</label>
                            
                             <input type="radio" name="sex" id="size_2" value="female" />
                             <label for="size_2">Female</label>
                            
                       </div>
                    </div>
                  
                  <div class="row-two">
                    <div class="height">
                    <p class="text">Height</p>
                      <div id="feet">
                         <input type="text" class="text-input" id="height-feet" onchange="validateForm()" autocomplete="off" required placeholder="feets">
                        <input type="text" class="text-input" id="height-inches" onchange="validateForm()" autocomplete="off" required  placeholder=" 0 inches">
                         <p id="showCm" class="changeUnit text" onclick="showCM()">switch to cm</p>
                      </div>
                      <div id="cm" style="display:none">
                         <input type="text" class="text-input" id="height-cm" onchange="validateForm()" autocomplete="off" required placeholder="cm">
                      
                         <p  id="showFeet" class="changeUnit text" onclick="showFeet()">Switch to feets + inches</p>
                      </div>
                    </div>
                    <div class="age">
                    <p class="text">Age</p>
                     <input type="number" class="text-input" id="age" onchange="validateForm()" autocomplete="off" required >
                    </div>
                  </div>
                    <div class="row-two">
                      <div class="weight">
                     <p class="text">Weight</p>
                     <input type="text" class="text-input" id="weight" onchange="validateForm()" autocomplete="off" required placeholder=" kg">
                    </div>
                    </div>
                  <button type="button" class="" id="submit">Submit</button>
                    <span class="form-not-filled" id="form-not-filled">* Complete all fields to calculate BMI </span>
               </form>
      
        </div>
        
        <div class="BMI-result-box" id="BMI-result-box">
         
          <div id='myChart'></div>
        
        </div>
      </div>
              <table class="BMI-Table"> 
        <thead>
          <tr>
            <th>BMI Weight</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Below 18.5 </td>
            <td>Underweight</td>
          </tr>
          <tr>
            <td>18.5–24.9 </td>
            <td>Normal weight</td>
          </tr>
          <tr>
            <td>25–29.9</td>
            <td> Overweight</td>
          </tr>
          <tr>
            <td>30–35</td>
            <td>Obese</td>
          </tr>
          <tr>
            <td>Over 35</td>
            <td>Morbid obesity</td>
          </tr>
        </tbody>
      </table>
      {% comment %} Script {% endcomment %}
      <script>
              var bmiResult=0;
              var email= document.getElementById("email");
              var phone= document.getElementById("phone-number");
              var sex= document.getElementsByName('sex');
              var age= document.getElementById('age');
              var gender;
              var heightFeet= document.getElementById("height-feet");
              var heightInches= document.getElementById("height-inches");
              var heightCM= document.getElementById("height-cm");
              var inches;
              var finalHeightInCm
              var weight = document.getElementById("weight");
              var form = document.getElementById("form");
  
         
            
        
              function validateForm(){
                if(  (heightFeet.value=='' && heightCM.value=='' ) || weight.value=='' || email.value=='' || phone.value=='' || age.value=='' ){
                  
                  document.getElementById("submit").disabled = true;
                    document.getElementById("form-not-filled").style.display = 'flex';
                   document.getElementById("submit").classList.add("disabled")
                  console.log("disabled")
                  console.log("height in cm",)
                   for(i = 0; i < sex.length; i++) {
                        if(sex[i].checked){
                        gender=sex[i].value;
                        console.log(gender,sex[i])
                        }
                    }
                 if ((heightFeet.value!='' && heightInches.value!='' ) || ((heightFeet.value!='' && heightInches.value!='') && heightCM.value == '')){
                    finalHeightInCm=0;
                   finalHeightInCm= heightFeet.value*30.48 +  heightInches.value*2.54;
                  
                     console.log( "heightFeet.value!='' && heightInches.value!=''",finalHeightInCm);  
                 }
                  if (heightFeet.value!='' && heightInches.value=='' && heightCM.value == ''){
                    finalHeightInCm=0;
                   finalHeightInCm= heightFeet.value*30.48;
                    console.log("heightFeet.value!='' && heightInches.value=='' ",finalHeightInCm)
                 }
                  if ((heightFeet.value!='' && heightInches.value!='') && heightCM.value!= ''){
                     finalHeightInCm=0;
                   finalHeightInCm= heightCM.value;
                    
                      console.log(finalHeightInCm)
                 }
                   if ( heightCM.value!= ''){
                     finalHeightInCm=0;
                   finalHeightInCm= heightCM.value;
                    
                      console.log(finalHeightInCm)
                 }
                }else{
                  document.getElementById("submit").disabled = false;
                  document.getElementById("submit").classList.remove("disabled");
                   document.getElementById("form-not-filled").style.display = 'none';
                   console.log("active")
                }
              }
              document.getElementById("submit").addEventListener("click", countBmi);
               const myTimeout = setTimeout(validateForm(),100);
              function countBmi(e){
                       e.preventDefault();
                           var data = {
                  height:finalHeightInCm,
                  weight:weight.value,
                  genderValue:gender,
                  age:age.value,
                  phone:phone.value,
                  email:email.value,
              };
                 var bmi = Number(data.weight)/(Number(data.height)/100*Number(data.height)/100);
                 console.log("active", "height", data.height)
                   bmiResult= bmi;
      
                form.reset();
                 document.getElementById("submit").classList.add("disabled");
      
                    
                var result = '';
           
                 console.log(data);
                var result = '';
                if(bmi<18.5){
                  result = 'Underweight';
                   }else if(18.5<=bmi&&bmi<=24.9){
                  result = 'Normal weight';
                   }else if(25<=bmi&&bmi<=29.9){
                  result = 'Overweight';
                   }else if(30<=bmi&&bmi<=34.9){
                  result = 'Obese';
                   }else if(35<=bmi){
                  result = 'Morbid obesity';
                   }
                
              
               
                console.log("result",result,bmi);
      
              }
           window.feed = function(callback) {
                      var tick = {};
                      tick.plot0 =Math.round(bmiResult) ;
                      callback(JSON.stringify(tick)); 
                   }
        
        var myConfig = {
        type: "gauge",
        globals: {
          fontSize: 15
        },
        plotarea: {
          marginTop: 50
        },
        plot: {
          size: '100%',
          valueBox: {
            placement: 'center',
            text: '%v', //default
            fontSize: 25,
            rules: [{
                rule: '%v <= 0',
                text: '%v<br>Your BMI is'
              },
              {
                rule: '%v < 18.5 && %v >  0',
                text: '%v<br>Underweight'
              },
              {
                rule: '%v < 24.9 && %v >=  18.5',
                text: '%v<br>Normal weight'
              },
              {
                rule: '%v < 29.9 && %v >= 24.9',
                text: '%v<br>Overweight'
              },
              {
                rule: '%v < 35 && %v >= 29.9',
                text: '%v<br>	Obese'
              },
              {
                rule: '%v >=  35',
                text: '%v<br>Morbid obesity'
              }
            ]
          }
        },
        tooltip: {
          borderRadius: 5
        },
        scaleR: {
          aperture: 180,
          minValue: 0,
          maxValue: 50,
          step: 10,
          center: {
            visible: false
          },
          tick: {
            visible: false
          },
          item: {
            offsetR: 0,
            rules: []
          },
          labels: [ ],
          ring: {
            size: 50,
            rules: [{
                rule: '%v <= 0',
                backgroundColor: '#29B6F6'
              },
              {
                rule: '%v > 0 && %v < 18.5',
                backgroundColor: '#FFA726'
              },
              {
                rule: '%v >= 18.5 && %v < 24.99',
                backgroundColor: '#FFA726'
              },
             {
                rule: '%v >= 25 && %v < 29.99',
                backgroundColor:  '#FFA726'
              },
                    {
                rule: '%v >= 30 && %v < 35',
                backgroundColor: '#EF5350'
              },
              {
                rule: '%v >= 35',
                backgroundColor: '#E53935'
              }
            ]
          }
        },
           refresh: {
          type: "feed",
          transport: "js",
          url: "feed()",
          interval: 1500,
          resetTimeout: 1000
        },
        series: [{
          values: [0], // starting value
          backgroundColor: 'black',
          indicator: [10, 10, 10, 10, 0.75],
          animation: {
            effect: 2,
            method: 1,
            sequence: 4,
            speed: 900
          },
        }]
      };
       
      zingchart.render({
        id: 'myChart',
        data: myConfig,
        height: 400,
        width: '100%'
      });
  
   function showCM() {
    const x = document.getElementById("cm");
    const y = document.getElementById("feet");
    
    if (x.style.display === "none") {
       x.style.display = "block";
       y.style.display = "none";
    } else {
      x.style.display = "none";
    }
  }
        function showFeet() {
    const y = document.getElementById("cm");
    const x = document.getElementById("feet");
    
    if (x.style.display === "none") {
       x.style.display = "block";
       y.style.display = "none";
    } else {
      x.style.display = "none";
    }
  }
      </script>
      
      
      {% schema %}
        {
          "name": "BMI Calculator 2",
          "settings": [],
           "presets": [
          {
            "name": "BMI Calculator",
            "category": "Others"
          }
        ]
        }
      {% endschema %}
      
      {% stylesheet %}
      {% endstylesheet %}
      
      {% javascript %}
      {% endjavascript %}